<!---------------------------------------------------------------------------------------------->
<!-- This entire file follows the basic format of HTML5. Additionally, a script has been added
to configure the frontend which communicates with the backend. The frontend is written in HTML5,
the script is written in Javascript, and the design is written in CSS (`forms.css`) -->
<!---------------------------------------------------------------------------------------------->
<!-- This is the frontend of the fullstack web application which allows Eldon C. Stutsman employees
to complete an onboarding or offboarding form for new or leaving employees.  -->
<!---------------------------------------------------------------------------------------------->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECS Jira | Forms</title> <!-- Title of the app that is shown in the tab -->

    <!-- import the css file for the desgin -->
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/forms.css') }}">
</head>

<!-- HTML <body> is the area for the user interface, UI.
     Here is where you design the UI however you please. Throughout the body you 
     will see many 'div' objects that have attributes such as "class", "id", "style", "onclick" etc. 
     These atributes can be used to name all objects so they can be refrenced or called
     later using Javascript.
     
     An example that requires a call and an attribute would be to get the value of a text field: 
    ----------------------------------------------------------------------------------------------
     HTML:
     <div>
        <input type="text" id="name"/>
     </div>

     Javascript:
     document.getElementById("name").value
     ---------------------------------------------------------------------------------------------
     This method is continuously used throughout the file.

     Another major attribute is "onClick()". This is used for buttons to apply an action however you'd like.

     An exmaple of "onClick()" would be to make a div appear or disappear:
     ----------------------------------------------------------------------------------------------
     HTML:
     <div id="info" style="display:none">
        <input type="text" id="name"/>
     </div>

     Javascript:
     function showDiv() {
        var nameInput = document.getElementById("info")

        if (nameInput.display === "none") {
            nameInput.display = "block"
        } else {
            nameInput.display = "none"
        }
     }
     ----------------------------------------------------------------------------------------------
     Pay attention to what you name things, and make sure you are naming properly to not get confused.

     These two examples are primarily what define the HTML frontend and Javascript backend.

     Specifying element class or id names is also the way to call them in CSS.
     To call a class: .class{}
     To call an id: #id{}
     To call a built-in element such as "input": input{}
     -->
<!------------------------------------------------------------------------------------------------------>

<body id="body">
    <!-- `topBar` is a div that has two logos and a navigation bar
         The two logos have an "onCLick()" which directs the user
         to ECS website or Jira.

         Nav has either a Home or Forms options which travels between 
         two different HTML files using an `href` (url link function) -->
    <div class="topBar">
        <div class="pics">
            <img src="/static/styles/ecs.webp" onclick="imgClick()" role="button">
            <img src="/static/styles/jira.png" onclick="jiraClick()" role="button">
        </div>

        <div class="nav">
            <a href="/">HOME</a>
            <a class="active" href="/forms">FORMS</a>
        </div>
    </div>

    <!-- `greet` is the front page of the "forms.html" which gives the 
         user two buttons to select from, which are the two form types: onboard or offboard
        
         the buttons' "onClick()" function will a use similar method as the example 
         to make divs appear. In this case, the div is either an onboard or offboard form -->
    <div id="greet">
        <div>
            <h1>Eldon C. Stutsman</h1> <!-- h1 is title element -->
        </div>

        <div>
            <p>Please select a form.</p>
        </div>

        <div class="formSelect" id="formSelect">
            <button class="button button1"  id="button1" value="onboard" onClick="onboardClick()">Onboard</button>
            <button class="button button2"  id="button2" value="offboard" onClick="offboardClick()">Offboard</button>
        </div>
    </div>

    <!-- This is the entire onboard form that uses the built-in element "form"
         The form is split into two parts, employee information and hardware information
         Throughout the form you'll see many uses of "input" where it is either 
         a text field, text area, or radio group, depending on the section
        
         The reason "onSubmit" is returning false is to prevent the form to reset,
         which results in the entire webpage to refresh (which loses the user's inputs)-->
    <form method="GET" action="" onSubmit="return false;">
        <!-- ONBOARD FORM -->
        <div id="onboardForm" style="display:none">
            <div id="employeeInfo">
                <div>
                    <h1>Employee Information</h1>
                </div>

                <div class="grid">
                    <div class="input">
                        <div>
                            <label>Name:</label>
                        </div>
                        
                        <div>
                            <input type="text" id="name" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Start Date:</label>
                        </div>
                        
                        <div>
                            <input type="date" id="date" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Manager:</label>
                        </div>
                        
                        <!--The commented out "select" element is an exmaple of how to get 
                            a dropdown option. "Select" in HTML is the equivalent to Jira's 
                            multiple select custom field. That custom field requires the backend 
                            to know the unique id of each item created in the mutiple select-->
                        <div>
                            <!-- <select name="manager" id="manager" required>
                                <option value="Matthew Mapel">Matthew Maple</option>
                                <option value="Alex Atkinson">Alex Atkinson</option>
                                <option value="Luke Skywalker">Luke Skywalker</option>
                                <option value="Darth Vadar">Darth Vadar</option>
                            </select> -->
                            <input type="text" id="manager" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="textArea">
                        <div>
                            <label for="description">Description:</label>
                        </div>
                        <div>
                            <textarea id="description"></textarea>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Company:</label>
                        </div>
                        <div>
                            <select name="company" id="company" required>
                                <option value="10116">Eldon C. Stutsman</option>
                            </select>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Department:</label>
                        </div>
                        <div>
                            <input type="text" id="department" autocomplete="off" required/>
                        </div>
                    </div>

                    <br>

                    <div class="input">
                        <div>
                            <label>Job Title:</label>
                        </div>
                        <div>
                            <input type="text" id="jobTitle" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Employee ID:</label>
                        </div>
                        <div>
                            <input type="text" id="employeeID" autocomplete="off" required/>
                        </div>
                    </div>
                </div>
            </div>

            <div id="hardwareInfo">
                <div>
                    <h1>Hardware Information</h1>
                </div>

                <!--Two buttons which will specifiy if the user is a computer or non-computer user.
                    Uses the same button concept as the example.-->
                <div>
                    <button type="button" class="scroll user" onclick="cpuForm()">Computer User</button>
                    <button type="button" class="scroll user" onclick="nonCpuForm()">Non-Computer User</button>
                </div>
                
                <!--For "radioGroup", the name of each input must match. This is HTMLs
                    way of connecting the radio buttons into one radio group. Essentially,
                    it prevents multiple values of a radio group.
                    Also, it's important to give each input a value to let Javascript know which 
                    option was clicked-->

                <div id="computerUser" style="display:none">
                    <div class="radioGroup">
                        <label>Active Directory account needed?</label><br>
                        <input type="radio" id="AD" value="true" name="AD" required>
                        <label id="radioButts" for="AD">Yes</label><br>

                        <input type="radio" value="false" name="AD">
                        <label id="radioButts">No</label><br>
                    </div>

                   <div class="radioGroup">
                        <label>Email address needed?</label><br>
                        <input type="radio" id="email" value="true" name="email" required>
                        <label id="radioButts" for="email">Yes</label><br>

                        <input type="radio" value="false" name="email">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="radioGroup computer">
                        <label>Computer Issued?</label><br>

                        <input type="radio" id="laptop" value="true" name="computer" required>
                        <label id="radioButts" for="laptop">Yes - Laptop</label><br>

                        <input type="radio" id="desktop" value="true" name="computer">
                        <label id="radioButts" for="desktop">Yes - Desktop</label><br>

                        <input type="radio" value="false" name="computer">
                        <label id="radioButts">No</label><br>
                    </div>
  
                    <div class="radioGroup">
                        <label>Agvantage needed?</label><br>
                        <input type="radio" id="agvantage" value="true" name="agvantage" required>
                        <label id="radioButts" for="agvantage">Yes</label><br>

                        <input type="radio" value="false" name="agvantage">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="radioGroup">
                        <label>Paperwise needed?</label><br>
                        <input type="radio" id="paperwise" value="true" name="paperwise" required>
                        <label id="radioButts" for="paperwise">Yes</label><br>

                        <input type="radio" value="false" name="paperwise">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="comment">
                        <label>Any other hardware or software information?</label><br>
                        <textarea id="otherInfo"></textarea>
                    </div>

                    <div class="radioGroup">
                        <label>Office phone needed?</label><br>
                        <input type="radio" id="officePhone" value="true" name="officePhone" required>
                        <label id="radioButts" for="officePhone">Yes</label><br>

                        <input type="radio" value="false" name="officePhone">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="radioGroup">
                        <label>Mobile Phone needed?</label><br>

                        <input type="radio" id="andriod" value="true" name="cpuMobile">
                        <label id="radioButts" for="andriod">Yes</label><br>

                        <input type="radio" value="false" name="cpuMobile">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="radioGroup">
                        <label>Key Fob needed?</label><br>
                        <input type="radio" id="fob" value="true" name="cpuFob">
                        <label id="radioButts" for="fob">Yes</label><br>

                        <input type="radio" value="false" name="cpuFob">
                        <label id="radioButts">No</label><br>

                        <div class="renderInfo" id="computerInfo" style="visibility:hidden">
                            
                        </div>
                    </div>

                    <div class="radioGroup">
                        <label>Where will the onboarding employee be located?</label><br>                
                        <textarea id="location" placeholder="Examples being: what building, office, etc."></textarea>
                    </div>

                    <div class="radioGroup">
                        <label>Has the onboarding welcome form been printed?</label><br>
                        <input type="radio" id="print" value="true" name="cpuPrint">
                        <label id="radioButts" for="print">Yes</label><br>

                        <input type="radio" value="false" name="cpuPrint">
                        <label id="radioButts">No</label><br>
                    </div>
                </div>

                <div id="nonComputerUser" style="display:none">
                    <div class="radioGroup">
                        <label>Mobile Phone needed?</label><br>

                        <input type="radio" id="andriod" value="true" name="nonCpuMobile" required>
                        <label id="radioButts" for="andriod">Yes</label><br>

                        <input type="radio" value="false" name="nonCpuMobile">
                        <label id="radioButts">No</label><br>
                    </div>

                    <div class="radioGroup">
                        <label>Key Fob needed?</label><br>
                        <input type="radio" id="fob" value="true" name="nonCpuFob" required>
                        <label id="radioButts" for="fob">Yes</label><br>

                        <input type="radio" value="false" name="nonCpuFob">
                        <label id="radioButts">No</label><br>

                        <div class="renderInfo" id="computerInfo" style="visibility:hidden">
                            
                        </div>
                    </div>

                    <div class="radioGroup">
                        <label>Has the onboarding welcome form been printed?</label><br>
                        <input type="radio" id="print" value="true" name="nonCpuPrint" required>
                        <label id="radioButts" for="print">Yes</label><br>

                        <input type="radio" value="false" name="nonCpuPrint">
                        <label id="radioButts">No</label><br>
                    </div>
                </div>
            </div>

            <div class="status">
                <button type="button" class="scroll backButton" onCLick="goBack()">Back</button>
                <button type="submit" class="scroll nextButton" onClick="createTicket()">Submit</button>
            </div>

            <!-- <div class="popup" onclick="errorMsg()">
                <span class="popuptext" id="myPopup">Please fill in all fields!</span>
            </div> -->
        </div>
    </form>

    <div id="loading" style="display:none"></div>

    <div id="submitted" style="display:none">
        <div >
            <img src="/static/styles/check.png">
        </div>
        <div>
            <h2>Ticket Created!</h2>
            <p id="explain">A ticket has been created in Jira. Click the button below to view.</p>
        </div>

        <div>
            <button type="button" id="generate" class="scroll" onclick="viewTicket()">View Ticket</button>
            <a id="link" href="javascript:void(0);" style="display: none">*ERROR - INVALID INPUT(S)*<br>TRY AGAIN!</a>
        </div>
    </div>

    <div id="reset" class="reset" style="display:none">
        <button type="submit" id="resetButt" class="scroll" onclick="reset()">New Ticket</button>
    </div>

<!------------------------------------------------------------------------------------------------------>

    <!--The offboard form is the exact same thing as the onboard, but inputs must 
        be named differently so Javascript does not mix them up-->
    <!-- OFFBOARD FORM -->
    <form onSubmit="return false;">
        <div id="offboardForm" style="display:none">
            <div id="employeeInfo">
                <div>
                    <h1>Employee Information</h1>
                </div>

                <div class="grid">
                    <div class="input">
                        <div>
                            <label>Name:</label>
                        </div>
                        
                        <div>
                            <input type="text" id="offName" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>End Date:</label>
                        </div>
                        
                        <div>
                            <input type="date" id="offDate" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Manager:</label>
                        </div>
                        
                        <div>
                            <!-- <select name="manager" id="manager" required>
                                <option value="Matthew Mapel">Matthew Maple</option>
                                <option value="Alex Atkinson">Alex Atkinson</option>
                                <option value="Luke Skywalker">Luke Skywalker</option>
                                <option value="Darth Vadar">Darth Vadar</option>
                            </select> -->
                            <input type="text" id="offManager" autocomplete="off" required/>
                        </div>
                    </div>

                    <div class="textArea">
                        <div>
                            <label>Description:</label>
                        </div>
                        <div>
                            <textarea id="offDescription"></textarea>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Company:</label>
                        </div>
                        <div>
                            <select name="company" id="offCompany" required>
                                <option value="10116">Eldon C. Stutsman</option>
                            </select>
                        </div>
                    </div>

                    <div class="input">
                        <div>
                            <label>Department:</label>
                        </div>
                        <div>
                            <input type="text" id="offDepartment" autocomplete="off" required/>
                        </div>
                    </div>

                </div>
            </div>

            <div class="status">
                <button type="button" class="scroll backButton" onCLick="goBack()">Back</button>
                <button type="submit" class="scroll nextButton" onClick="createTicket()">Submit</button>
            </div>
        </div>
    </form>

<!-------------------------------------------------------------------------------------------------------->

    <!--Script is where Javascript is allows to be used to make backend
        actions on the frontend
    
        There are multiple different functions here which may also be called
        inside one another. An easy way to follow where the function is being called
        would be to use "CMD F" to find where functions are located. -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script>
        function imgClick() {
            window.open("https://stutsmans.com/")
        }

        function jiraClick() {
            window.open("https://stutsmans-sandbox-124.atlassian.net/jira/servicedesk/projects/ST/queues/custom/6")
        }

        // `set` is a global boolean that communicates with functions 
        // to check if the user selected onboard or offboard
        //
        // These 2 click functions uses the same example provided at the top of the file.
        var set;
        function onboardClick() {
            set = true;

            var onboardForm = document.getElementById("onboardForm"); 
            if (onboardForm.style.display === "none") {
                onboardForm.style.display = "block";
                document.getElementById("button1").style.display = "none";
                document.getElementById("button2").style.display = "none";
                document.getElementById("greet").style.display = "none";
            } 
        }

        function offboardClick() {
            set = false;

            var offboard = document.getElementById("offboardForm");            

            if (offboard.style.display === "none") {
                offboard.style.display = "block";
                document.getElementById("button1").style.display = "none";
                document.getElementById("button2").style.display = "none";
                document.getElementById("greet").style.display = "none";
            } 
        }

        // `cpu` is the same concept as `set`, except it lets functions know if 
        // the user is a computer user or non-computer user.
        //
        // Again, the two functions mirror the example at the top of the file.
        var cpu;
        function cpuForm() {
            var computerUser = document.getElementById("computerUser");
            var nonComputerUser = document.getElementById("nonComputerUser");

            if (computerUser.style.display === "none") {
                computerUser.style.display = "block";
                cpu = true;

                nonComputerUser.style.display = "none";
            } else {
                computerUser.style.display = "none";
            }
        }

        function nonCpuForm() {
            var nonComputerUser = document.getElementById("nonComputerUser");
            var computerUser = document.getElementById("computerUser");

            if (nonComputerUser.style.display === "none") {
                nonComputerUser.style.display = "block";
                cpu = false;

                computerUser.style.display = "none";
            } else {
                nonComputerUser.style.display = "none";
            }
        }

        //||||||||||||||||||||||||||||||||||||||||||\\
        //////////////////NOT IN USE\\\\\\\\\\\\\\\\\\\
        //|||||||||||||||||||||||||||||||||||||||||||\\
        //
        // This is a commented out function which allows radio groups to render
        // in another div of radio buttons or even inputs. The function takes two parameter:
        // the radio group name, and the div id.
        //
        // function radioSelect(name, id) {
        //     var radioGroup = document.querySelector(`input[name=${name}]:checked`).value
        //     var radioInput = document.getElementById(id)

        //     if (radioGroup === "true") {
        //         if (radioInput.style.visibility === "hidden") {
        //             radioInput.style.visibility = "visible";
        //         }
        //     } else {
        //         radioInput.style.visibility = "hidden";
        //     }
        // }

//-----------------------------------------------------------------------------------------------------------\\

        // This function, `createForm()` is the glue to the entire full stack web application.
        // Step-by-step how it works:
        // Checks whether the user clicked an onboard or offboard form
        // If onboard, get the values of all inputs in onboard employee information
        //    then, check if the user is a cpu or non-cpu user
        //    if cpu, get the value of all radio groups in cpu and put them in a Javascript object called, `tasks`.
        //    (a Javascript object is equivalent to a Python dictionary)
        //
        //    if non-cpu, get the value of all radio groups in non-cpu and put them in a Javascript object called, `tasks`.
        //    
        //    Once all info is retrived, the object `dictValues` stores all info given by the user, including the object `tasks`
        //
        // If offboard, get the values of all inputs in offboard employee information
        // Once all info is retrived, the object `dictValues` stores all info given by the user.
        // (no radio groups needed for an offboard employee)
        //
        // Once all values are stored in `dictValues`, a const "dataToSend" turns the Javscript object
        // into JSON format for the backend to read.
        // Then, using a built-in function `ajax`, we specify these parameter:
        // url = the Flask url route specified in the Python backend
        // type = HTTP request type
        // contentType = JSON requirement
        // data = the JSON data to send to the url
        //
        // After the values are sent to Python, the function "create()" will be use the values accordingly
        // to create a Jira ticket
        function createForm() {
            var onboard = document.getElementById('button1').value;
            var offboard = document.getElementById('button2').value;

            var form;
            if (set) {
                form = onboard

                const name = document.getElementById("name").value;
                const date = document.getElementById("date").value;
                const manager = document.getElementById("manager").value;
                const description = document.getElementById("description").value;
                const company = document.getElementById("company").value;
                const department = document.getElementById("department").value;
                const jobTitle = document.getElementById("jobTitle").value;
                const employeeID = document.getElementById("employeeID").value;

                var tasks;
                if (cpu) {
                    const AD = document.querySelector('input[name="AD"]:checked').value;
                    const email = document.querySelector('input[name="email"]:checked').value;
                    const computer = document.querySelector('input[name="computer"]:checked').value;
                    const agvantage = document.querySelector('input[name="agvantage"]:checked').value;
                    const paperwise = document.querySelector('input[name="paperwise"]:checked').value;
                    const officePhone = document.querySelector('input[name="officePhone"]:checked').value;
                    const mobile = document.querySelector('input[name="cpuMobile"]:checked').value;
                    const fob = document.querySelector('input[name="cpuFob"]:checked').value;
                    const print = document.querySelector('input[name="cpuPrint"]:checked').value;

                    tasks = {AD, email, computer, agvantage, paperwise, officePhone, mobile, fob, print};
                } else if (!cpu) {
                    const mobile = document.querySelector('input[name="nonCpuMobile"]:checked').value;
                    const fob = document.querySelector('input[name="nonCpuFob"]:checked').value;
                    const print = document.querySelector('input[name="nonCpuPrint"]:checked').value;
                    
                    tasks = {mobile, fob, print};
                }

                var dictValues = {form, name, date, manager, 
                                    description, company, department,
                                    jobTitle, employeeID, tasks}
            } else {
                form = offboard

                const name = document.getElementById("offName").value;
                const date = document.getElementById("offDate").value;
                const manager = document.getElementById("offManager").value;
                const description = document.getElementById("offDescription").value;
                const company = document.getElementById("offCompany").value;
                const department = document.getElementById("offDepartment").value;

                var dictValues = {form, name, date, manager, description, company, department}
            }

            const dataToSend = JSON.stringify(dictValues);
            // window.alert(dataToSend)

            $.ajax({
                url:"/create",
                type:"POST",
                contentType: "application/json",
                data: JSON.stringify(dataToSend)
            });
        }

        // This function, `addComments()` is the same, but a much simplier way to see how to send data to Python.
        // Grab the values from the inputs
        // Put them in an object
        // turn them into JSON format
        // use `ajax` to send the specified data
        function addComments() {
            const otherInfo = document.getElementById('otherInfo').value;
            const location = document.getElementById('location').value;

            const dictValues = {otherInfo, location}
            const dataToSend = JSON.stringify(dictValues);

            $.ajax({
                url:"/comments",
                type:"POST",
                contentType: "application/json",
                data: JSON.stringify(dataToSend)
            });
        }

        // This function, `createTicket()`, is an async function. This means that it calls
        // other functions and uses the await function which waits for a function to finish
        // before moving onto the next line. This is a way to make sure the app works 
        // in a domino effect, so it does not overlap functions. 
        const createTicket = async() => {
            // Check if onboard form or offboard form
            if (set) {
                // Check if cpu user or non-cpu user
                if (!cpu) {
                    // If Non-Computer User, disbale all required inputs for cpu users
                    // and enable the required inputs for non-cpu.
                    // If these inputs are not disabled, then the form will
                    // think it is still required, even though it does not visible
                    // on the frontend
                    document.querySelector('input[name="AD"]').required = false;
                    document.querySelector('input[name="email"]').required = false;
                    document.querySelector('input[name="computer"]').required = false;
                    document.querySelector('input[name="agvantage"]').required = false;
                    document.querySelector('input[name="paperwise"]').required = false;
                    document.querySelector('input[name="officePhone"]').required = false;

                    document.querySelector('input[name="nonCpuMobile"]').required = true;
                    document.querySelector('input[name="nonCpuFob"]').required = true;
                    document.querySelector('input[name="nonCpuPrint"]').required = true;
                } else {
                    //If Computer User, vice versa as above info
                    document.querySelector('input[name="nonCpuMobile"]').required = false;
                    document.querySelector('input[name="nonCpuFob"]').required = false;
                    document.querySelector('input[name="nonCpuPrint"]').required = false;

                    document.querySelector('input[name="AD"]').required = true;
                    document.querySelector('input[name="email"]').required = true;
                    document.querySelector('input[name="computer"]').required = true;
                    document.querySelector('input[name="agvantage"]').required = true;
                    document.querySelector('input[name="paperwise"]').required = true;
                    document.querySelector('input[name="officePhone"]').required = true;
                }

                // `checkValidity()` is a secure way to make sure that all inputs in the 
                // form are filled in. "$('form')[0]" specifies the first form seen 
                // by HTML, which in this case is the onboard form
                // 
                // If all inputs are filled, then the submission process is triggered,
                // a loading screen appears for a certain number of seconds, and 
                // calls the `createForm()` function.
                var $form = $('form')[0];
                if ($form.checkValidity()) {
                    var loading = document.getElementById("loading");
                    if (loading.style.display === "none") {
                        document.getElementById("onboardForm").style.display = "none"
                        loading.style.display = "block";

                        await setTimeout(function() {
                            $('#loading').addClass('hidden');

                            var submitted = document.getElementById("submitted")
                            if (submitted.style.display === "none") {
                                loading.style.display = "none"
                                submitted.style.display = "block";
                                document.getElementById("reset").style.display = "block";
                            }

                        }, 2500); // 2.5 seconds -> 3000 = 3 seconds, etc.
                    }
                } else {
                    errorMsg() // An alternate error message that is not in use.
                }
            } else {
                // Same conecpt as above, except "$('form')[1]" is the second form
                // seen by HTML, which is the offboard form.
                var $form = $('form')[1];
                if ($form.checkValidity()) {
                    var loading = document.getElementById("loading");
                    if (loading.style.display === "none") {
                        document.getElementById("offboardForm").style.display = "none"
                        loading.style.display = "block";

                        await setTimeout(function() {
                            $('#loading').addClass('hidden');

                            var submitted = document.getElementById("submitted")
                            if (submitted.style.display === "none") {
                                loading.style.display = "none"
                                submitted.style.display = "block";
                                document.getElementById("reset").style.display = "block";
                            }

                        }, 2500);
                    }
                } else {
                    errorMsg() // An alternate error message that is not in use.
                }
            }
            await createForm(); // Creation of Jira ticket
        }

        //||||||||||||||||||||||||||||||||||||||||||\\
        //////////////////NOT IN USE\\\\\\\\\\\\\\\\\\\
        //|||||||||||||||||||||||||||||||||||||||||||\\
        //
        // Simple error message pop up configured in HTML and CSS
        function errorMsg() {
            var popup = document.getElementById("myPopup");
            popup.classList.toggle("show");
            // window.alert("Please fill in all required fields!")
        }

        // This function, `pyhtonFetch()`, fetches the Python method "/key"
        // That gets the "issueKey" of the newly created Jira ticket.
        // Similarly to the Python backend, Javascript handles the fetched data
        // as a dictionary. Since we know the key name we want, we can directly grab the value.
        // The value of the "issueKey" is then attached to a url link, which then
        // becomes visible to the frontend as a button "View Ticket" for the user to 
        // see their new ticket.
        function pythonFetch() {
            var link = document.getElementById("link")
            if (link.style.display === "none") {
                link.style.display = "block";
            }

            var name = document.getElementById("name");
            if (name.value !== null) {
                return fetch('/key').then(response => response.json()).then(function(data) {
                    let temp = "https://stutsmans-sandbox-124.atlassian.net/jira/servicedesk/projects/ST/queues/custom/6/"
                    let issueKey = data["key"]
                    let issueUrl = document.getElementById("link").innerHTML = temp + issueKey
                    document.getElementById("link").href = issueUrl
                })
            } 
        }

        // This function, `viewTicket()` is the action of a button to travel
        // to the newly created Ticket.
        // Again, this uses an async function to implement the domino effect.
        // As seen, the function`addComments()` is part of this action function.
        // So, the comments of the ticket do not get updated until the user clicks
        // the "View Ticket" function.
        const viewTicket = async() => {
            addComments();
            const result = await pythonFetch();
            await window.open(document.getElementById("link").href)
        }

        //This function, `goBack()` is for the user to travel
        // back to the form select screen.
        // This uses the show div example at the top of the file.
        function goBack() {
            var onboard = document.getElementById("onboardForm");
            var offboard = document.getElementById("offboardForm");
            var submitted = document.getElementById("submitted");

            if (onboard.style.display === "block") {
                onboard.style.display = "none";
            } else if (offboard.style.display === "block") {
                offboard.style.display = "none";
            } else if (submitted.style.display = "block") {
                document.getElementById("submitted").style.display = "none";
            }

            document.getElementById("greet").style.display = "block";
            document.getElementById("button1").style.display = "inline-block";
            document.getElementById("button2").style.display = "inline-block";

            //||||||||||||||||||||||||||||||||||||||||||\\
            //////////////////NOT IN USE\\\\\\\\\\\\\\\\\\\
            //|||||||||||||||||||||||||||||||||||||||||||\\
            // An example of how to tell the Python backend to delete a specified issue.
            // $.ajax({
            //     url:"/delete",
            //     type:"DELETE",
            //     contentType: "application/json"
            // });
        }

        // This function, `reset()` is used for when the user would like
        // to create a new ticket. This is the alternative to the default form submit.
        function reset() {
            window.location.reload();
        }

    </script>
</body>
</html>